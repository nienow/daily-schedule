const D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"],u=()=>{var c;const e=document.forms.generate,t=new Date(`${e.startDate.value}T00:00:00`),a=new Date(`${e.endDate.value}T00:00:00`),o=[e.sunday.checked,e.monday.checked,e.tuesday.checked,e.wednesday.checked,e.thursday.checked,e.friday.checked,e.saturday.checked],d=[];return(c=e.prefill)==null||c.forEach(n=>{d.push(n.value)}),{startDate:t,endDate:a,prefill:d,activeDays:o}},l=()=>{const e=u();e.startDate=e.startDate.toISOString().split("T")[0],e.endDate=e.endDate.toISOString().split("T")[0];const t=new URLSearchParams(e).toString();window.history.pushState(e,null,"?"+t)},m=()=>{const{startDate:e,endDate:t,prefill:a,activeDays:o}=u(),d=Math.round((t.getTime()-e.getTime())/864e5),n=8.5/a.length;let s="";for(let i=0;i<d+1;i++){const r=new Date(e.getTime()+864e5*i);if(!o[r.getDay()])continue;const y=`<div class="title">${D[r.getDay()]}, ${v[r.getMonth()]} ${r.getDate()}</div>`,p=a.map(g=>`<div class="line" style="height: ${n}in"><div class="txt">${g}</div></div>`),h=`<div class="page">${y}${p.join("")}</div>`;s+=h}return s};function f(e){e.preventDefault();const t=u();window.history.pushState({params:t},null);const a=m();document.getElementById("output").contentWindow.document.body.innerHTML=a,document.getElementById("output").parentElement.style.visibility="visible",document.forms.generate.style.display="none"}window.addEventListener("popstate",e=>{var a;if((a=e.state)==null?void 0:a.params){const o=m();document.getElementById("output").contentWindow.document.body.innerHTML=o,document.getElementById("output").parentElement.style.visibility="visible",document.forms.generate.style.display="none"}else window.location.reload()});function w(e){e.preventDefault(),document.getElementById("output").contentWindow.print()}function E(e){const t=document.createDocumentFragment(),a=document.getElementById("prefillTemplate");if(e)e.split(",").forEach(o=>{const d=a.content.cloneNode(!0);d.querySelector("input").value=o,t.appendChild(d)});else for(let o=8;o<17;o++){const d=o===12?12:o%12,c=a.content.cloneNode(!0);c.querySelector("input").value=""+d,t.appendChild(c);for(let n=1;n<2;n++)t.appendChild(a.content.cloneNode(!0))}document.getElementById("prefill").appendChild(t)}function k(){const e=new URLSearchParams(window.location.search),t=document.forms.generate,a=t.startDate,o=t.endDate,d=new Date(new Date().toDateString());e.has("startDate")?a.value=e.get("startDate"):a.valueAsDate=d,e.has("endDate")?o.value=e.get("endDate"):(d.setMonth(d.getMonth()+3),o.valueAsDate=d);const c=e.has("activeDays")?e.get("activeDays").split(",").map(n=>n&&n.toLowerCase()==="true"):[!1,!0,!0,!0,!0,!0,!1];t.sunday.checked=c[0],t.monday.checked=c[1],t.tuesday.checked=c[2],t.wednesday.checked=c[3],t.thursday.checked=c[4],t.friday.checked=c[5],t.saturday.checked=c[6],E(e.get("prefill")),document.getElementById("previewBtn").addEventListener("click",f),document.getElementById("printBtn").addEventListener("click",w),document.getElementById("backBtn").addEventListener("click",()=>{window.history.back()}),document.getElementById("addBtn").addEventListener("click",n=>{n.preventDefault(),document.getElementById("prefill").appendChild(document.getElementById("prefillTemplate").content.cloneNode(!0)),l()}),document.getElementById("prefill").addEventListener("click",n=>{n.preventDefault(),n.target.name==="removePrefill"&&(n.target.parentElement.remove(),l())}),document.getElementById("resetBtn").addEventListener("click",n=>{n.preventDefault(),window.history.pushState({},null,window.location.pathname),window.location.reload()}),document.querySelectorAll("input").forEach(n=>{n.addEventListener("input",s=>{l()})})}k();
